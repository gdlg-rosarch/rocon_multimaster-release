<launch>

  <arg name="hub_port" default="12345" />
  <arg name="gateway1_port" default="12346" />
  <arg name="gateway2_port" default="12347" />
  <arg name="time_limit" default="300.0" />
  <arg name="debug" default="false" />

  <include file="$(find rocon_gateway_tests)/launch/includes/double_gateways_hub.launch">
    <arg name="hub_port" value="$(arg hub_port)" />
    <arg name="gateway1_port" value="$(arg gateway1_port)" />
    <arg name="gateway2_port" value="$(arg gateway2_port)" />
    <arg if="$(arg debug)" name="output" value="screen" />
  </include>

  <!-- launch the test -->
  <test name="multimaster_test" pkg="rocon_gateway_tests" type="test_pull_remotely.py" test-name="test_pull_remotely" time-limit="$(arg time_limit)">
    <env name="ROS_MASTER_URI" value="http://localhost:$(arg gateway2_port)" />
  </test>

</launch>
