<launch>

  <arg name="hub_port" default="12345" />
  <arg name="gateway_port" default="12346" />
  <arg name="time_limit" default="300.0" />
  <arg name="debug" default="false" />

  <include file="$(find rocon_gateway_tests)/launch/includes/single_gateway_hub.launch">
    <arg name="hub_port" value="$(arg hub_port)" />
    <arg name="gateway_port" value="$(arg gateway_port)" />
    <arg if="$(arg debug)" name="output" value="screen" />
  </include>

  <!-- launch the test -->
  <test name="multimaster_test" pkg="rocon_gateway_tests" type="test_advertisements_locally.py" test-name="test_advertisements_locally" time-limit="$(arg time_limit)">
    <env name="ROS_MASTER_URI" value="http://localhost:$(arg gateway_port)" />
  </test>

</launch>
